services:
  # 2. Task Manager MCP - AI-powered task planning
  task-manager-mcp:
    build:
      context: https://github.com/tradesdontlie/task-manager-mcp.git
    container_name: task-manager
    restart: unless-stopped
    ports:
      - "8050:8050"
    volumes:
      - "$HOME/.local/share/mcp/tasks:/app/tasks"
    environment:
      TRANSPORT: sse
      HOST: 0.0.0.0
      PORT: 8050
      LLM_PROVIDER: openai
      LLM_API_KEY: "your-api-key-or-ollama-dummy"
      LLM_CHOICE: "gpt-4"
      OPENAI_API_BASE: "http://ollama:11434/v1" # For local Ollama
    labels:
      traefik.enable: true
      traefik.http.services.taskmanager.loadbalancer.server.port: 8050
      traefik.http.routers.taskmanager.rule: Host(`mcp.localhost`) && PathPrefix(`/tasks`)
      traefik.http.routers.taskmanager.service: taskmanager
      traefik.http.routers.taskmanager.entrypoints: web
    depends_on:
      - ollama-cpu
