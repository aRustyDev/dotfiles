---
# docker-compose.yml
name: mcp-global
services:
  traefik:
    image: traefik:latest
    container_name: ingress
    command:
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--entrypoints.web.address=:80"
    ports:
      - "80:80"
      - "8080:8080"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
  dockerhub:
    image: mcp/dockerhub
    container_name: dockerhub
    stdin_open: true # docker run -i
    tty: true # docker run -t
    command:
      - "--transport=stdio"
      - "--username=op://Cisco/koclujb733w4wcgafe4whlurwa/username"
    environment:
      HUB_PAT_TOKEN: "op://Cisco/koclujb733w4wcgafe4whlurwa/credential"
    labels:
      traefik.enable: true
      traefik.http.routers.dockerhub.rule: PathPrefix(`/dockerhub`)
      traefik.http.routers.dockerhub.loadbalancer.server.port: 3000
  github:
    image: ghcr.io/github/github-mcp-server
    container_name: github
    stdin_open: true # docker run -i
    tty: true # docker run -t
    labels:
      traefik.enable: true
      traefik.http.routers.github.rule: PathPrefix(`/github`)
    environment:
      GITLAB_API_URL: https://gitlab.com/api/v4
      GITHUB_PERSONAL_ACCESS_TOKEN: "op://Developer/zed-github-mcp/token"
  falkordb:
    image: falkordb/falkordb:latest
    container_name: graphdb
    ports:
      - "6379:6379" # Redis/FalkorDB port
      - "3000:3000" # FalkorDB web UI
    environment:
      - FALKORDB_PASSWORD=${FALKORDB_PASSWORD:-}
      - BROWSER=${BROWSER:-1} # Enable FalkorDB Browser UI (set to 0 to disable)
    volumes:
      - ${XDG_DATA_HOME:-$HOME/.local/share}/mcp/memory:/data # Persist FalkorDB data
    healthcheck:
      test: ["CMD", "redis-cli", "-p", "6379", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s
    labels:
      traefik.enable: true
      traefik.http.routers.falkordb.rule: PathPrefix(`/graph`)
  memory:
    image: zepai/knowledge-graph-mcp:standalone
    container_name: memory
    stdin_open: true # docker run -i
    tty: true # docker run -t
    # For specific versions, replace 'standalone' with a version tag:
    #   image: zepai/knowledge-graph-mcp:1.0.0-standalone
    # When building locally, the build section below will be used.
    env_file:
      - path: ./config/graphiti.env
        required: false
    depends_on:
      falkordb:
        condition: service_healthy
    environment:
      # Database configuration
      - FALKORDB_URI=${FALKORDB_URI:-redis://falkordb:6379}
      - FALKORDB_PASSWORD=${FALKORDB_PASSWORD:-}
      - FALKORDB_DATABASE=${FALKORDB_DATABASE:-default_db}
      # Application configuration
      - GRAPHITI_GROUP_ID=${GRAPHITI_GROUP_ID:-main}
      - SEMAPHORE_LIMIT=${SEMAPHORE_LIMIT:-10}
      - CONFIG_PATH=/app/mcp/config/config.yaml
      - PATH=/root/.local/bin:${PATH}
    volumes:
      - ./config/graphiti.yaml:/app/mcp/config/config.yaml:ro
    ports:
      - "8000:8000" # Expose the MCP server via HTTP transport
    command: ["uv", "run", "main.py"]
    labels:
      traefik.enable: true
      traefik.http.routers.memory.rule: PathPrefix(`/memory`)
  sequentialthinking:
    image: mcp/sequentialthinking
    container_name: thinking
    stdin_open: true # docker run -i
    tty: true # docker run -t
    labels:
      traefik.enable: true
      traefik.http.routers.sequentialthinking.rule: PathPrefix(`/plan/seq`)
  duckduckgo:
    image: mcp/duckduckgo
    container_name: websearch
    stdin_open: true # docker run -i
    tty: true # docker run -t
    labels:
      traefik.enable: true
      traefik.http.routers.duckduckgo.rule: PathPrefix(`/search/ddg`)
    annotations:
      com.example.foo: bar
  gitlab:
    image: mcp/gitlab
    stdin_open: true # docker run -i
    tty: true # docker run -t
    container_name: gitlab
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.gitlab.rule=PathPrefix(`/gitlab`)"
    environment:
      GITLAB_PERSONAL_ACCESS_TOKEN: "op://Developer/zed-mcp-gitlab/credential"
  gitlab-sscm:
    image: mcp/gitlab
    stdin_open: true # docker run -i
    tty: true # docker run -t
    container_name: SSCM
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.gitlab.rule=PathPrefix(`/cisco/sscm`)"
    environment:
      GITLAB_API_URL: https://sscm.gus.cisco.com/api/v4
      GITLAB_PERSONAL_ACCESS_TOKEN: "op://Cisco/2aesy5on3cb6z6opqieeautagi/token"
  # terraform:
  #   image: hashicorp/terraform-mcp-server
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.terraform.rule=PathPrefix(`/terraform`)"
  time:
    image: mcp/time
    container_name: tool-time
    stdin_open: true # docker run -i
    tty: true # docker run -t
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.time.rule=PathPrefix(`/time`)"
  # python-refactoring:
  #   image: mcp/mcp-python-refactoring
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.pyref.rule=PathPrefix(`/py/refactor`)"
  # prometheus:
  #   image: ghcr.io/pab1it0/prometheus-mcp-server
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  simplechecklist:
    # https://github.com/DevMayur/SimpleCheckList
    image: mayurkakade/mcp-server:latest
    container_name: checklists
    stdin_open: true # docker run -i
    tty: true # docker run -t
    restart: unless-stopped
    ports:
      - "8355:8355"
      - "8180:80"
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.github.rule=PathPrefix(`/plan/checklist`)"
    volumes:
      - "$HOME/.local/share/mcp/checklist/global:/data"
    environment:
      API_BASE_URL: http://localhost:8355/
      DATABASE_PATH: /data/checklist.db
  # aws-core:
  #   image: mcp/aws-core-mcp-server
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  # aws-diagram:
  #   image: mcp/aws-diagram
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  # aws-terraform:
  #   image: mcp/aws-terraform
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  # aws-api:
  #   image: mcp/aws-api-mcp-server
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  # aws-docs:
  #   image: mcp/aws-documentation
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
  # aws-cloudtrail:
  #   image: mcp/cloudtrail-mcp-server
  #   labels:
  #     - "traefik.enable=true"
  #     - "traefik.http.routers.github.rule=PathPrefix(`/github`)"
